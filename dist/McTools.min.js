!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.mctools=e()}(this,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=window.navigator.userAgent.toLowerCase();function n(t){var e=Object.prototype.toString.call(t);return e.substring(8,e.length-1)}function r(t){return null!=t&&(a(t)&&!(null!==t&&t===t.window)&&Object.getPrototypeOf(t)===Object.prototype)}function i(t){return Array.isArray?Array.isArray(t):"Array"===n(t)}function o(t){return parseInt(t)==parseInt(t)&&-t==-t}function u(t){return"function"==typeof t}function a(e){return"object"===(void 0===e?"undefined":t(e))}function s(t){return/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-.,@?^=%&amp;:/~+#]*[\w\-@?^=%&amp;/~+#])?$/.test(t)}function c(t,e){if(!t)return"";if(!o(e)||e<=1)return t;for(var n="",r=e-1;r>=0;r--)n+=t;return n}function f(t){return t>=10?t:"0"+t}function l(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}var d={version:"0.2.7",ua:e,getType:n,cleanSpaceModel:function t(e){var r=n(e);if("String"===r)return e.replace(/\n|\r|\s/g,"");if("Object"===r){for(var i in e)e.hasOwnProperty(i)&&(e[i]=t(e[i]));return e}if("Array"===r){for(var o=e.length-1;o>=0;o--)e[o]=t(e[o]);return e}return"Null"===r||"Undefined"===r?"":e},isInt:function(t){return/^[0-9]+$/.test(t)},isIe89:function(){return/MSIE (8|9)\.0/.test(e)},isPlainObject:r,isArray:i,isUndefined:function(t){return void 0===t},isNumber:o,isDiff:function(e,n){return(void 0===e?"undefined":t(e))===(void 0===n?"undefined":t(n))&&JSON.stringify(e)!==JSON.stringify(n)},isFn:u,isObj:a,isStr:function(t){return"string"==typeof t},isPhone:function(t){return/^1\d{10}$/.test(t)},isEmail:function(t){return/^[0-9a-z][_.0-9a-z-]{0,31}@([0-9a-z][0-9a-z-]{0,30}[0-9a-z]\.){1,3}[a-z]{2,4}$/.test(t)},isUrl:s,isIOS:function(){return/iPhone|iPad|iPod/.test(e)},isAndroid:function(){return/Android/.test(e)},isMobile:function(){return/(iPhone|iPad|iPod|iOS|Android|adr|Windows Phone|SymbianOS)/gi.test(e)},isWeibo:function(){return/(weibo)/gi.test(e)},isWeChat:function(){return/micromessenger/gi.test(e)},isQQ:function(){return/qq\//gi.test(e)},isQzone:function(){return/qzone\//gi.test(e)},isChinese:function(t){return/^[\u4e00-\u9fa5·]+$/.test(t)},isEnglish:function(t){return/^[a-zA-Z\\s]+/.test(t)},isPassport:function(t){return/^[a-zA-Z0-9]{5,17}$/.test(t)},isIdCard:function(t){return/(^\d{15}$)|(^\d{17}([0-9]|X)$)/i.test(t)},strRepeat:c,encodePhone:function(t){return!t||o(t)?t.toString().replace(/^(\d{3})(\d{4})(\d{4})/,function(t,e,n,r){return[e,c("*",n.length),r].join("")}):t||""},clone:function(t){return a(t)?JSON.parse(JSON.stringify(t)):u(t)?new t:t},formatNum:f,formatDate:function(e,n){if(null==e&&(e=(new Date).getTime()),"object"===(void 0===e?"undefined":t(e))){if(isNaN(+e))throw"Parameter error";e=+e}if(isNaN(e)&&e.length>=8){var r=e.replace(/年|月|\//g,"-").replace(/日/g,"").split(/-|\s|:/g);r.length>=3&&(e=new Date(r[0],r[1]-1||0,r[2]||1,r[3]||null,r[4]||null,r[5]||null).getTime())}if(e=parseInt(e.toString().length<11?1e3*e:e),isNaN(e))throw"Parameter error";var i=(e=new Date(e)).getFullYear(),o=e.getMonth()+1,u=e.getDate(),a=e.getHours(),s=e.getMinutes(),c=e.getSeconds();if(o=f(o),u=f(u),a=f(a),s=f(s),c=f(c),"time"===n)return a+":"+s+":"+c;if("date"===n)return i+"-"+o+"-"+u;if("line"===n||"part"===n){var l=Math.floor((new Date-e)/1e3);if(l<60)return"刚刚";if(l<3600)return Math.floor(l/60)+"分钟前";if(l<86400)return Math.floor(l/3600)+"小时前";if("line"===n)return l<31536e3?o+"月"+u+"日":i+"年"+o+"月"+u+"日";if("part"===n)return l<2592e3?Math.floor(l/86400)+"天前":l<31536e3?Math.floor(l/2592e3)+"个月前":Math.floor(l/31536e3)+"年前"}return"piece"===n?{y:i,M:o,d:u,h:a,m:s,s:c,date:e,firstWeek:new Date(i,o-1,1).getDay(),time:e.getTime(),week:e.getDay()}:i+"-"+o+"-"+u+" "+a+":"+s+":"+c},getObjectURL:function(t){return t?window.URL?window.URL.createObjectURL(t):window.webkitURL?window.webkitURL.createObjectURL(t):(t.select(),t.blur(),document.selection.createRange().text):""},getFileExt:function(t){return t.value.substr(t.value.lastIndexOf(".")).toLowerCase()},assign:l,extend:function t(e,n,o){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var u in e=Object(e),n)o&&(r(n[u])||i(n[u]))?(r(n[u])&&!r(e[u])&&(e[u]={}),i(n[u])&&!i(e[u])&&(e[u]=[]),t(e[u],n[u],o)):void 0!==n[u]&&(e[u]=n[u]);return e},CanvasResize:function(t){var e={url:"",rate:.5,width:null,height:null,type:null,success:null};l(e,t);var n=new Image;n.src=e.url,n.crossOrigin="anonymous",n.onload=function(){var t,r=document.createElement("canvas"),i=r.getContext("2d"),o=this.width,u=this.height,a=e.rate||1;e.width&&e.height?(r.width=e.width,r.height=e.height):(r.width=o*a,r.height=u*a),i.drawImage(n,0,0,o,u,0,0,r.width,r.height),t=r.toDataURL(e.type),"function"==typeof e.success&&e.success(t)}},getSearch:function(t){var e=location.search,n=location.hash,r={};!e&&n&&n.indexOf("?")&&n.indexOf("?")<n.length&&(e=n.substr(n.indexOf("?")));for(var i=0,o=(e=e.substr(1).split("&")).length;i<o;i++){var u=e[i].split("=");r[u[0]]=u[1]}return r[t]},watchScroll:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scrollEnd,n=t.scroll;window.onscroll=function(){var t=document.body.scrollTop||document.documentElement.scrollTop,r=t+document.body.clientHeight===document.body.scrollHeight;"function"==typeof n&&n(t),r&&"function"==typeof e&&e(t)}},memoize:function(t,e){function n(r){var i=n.cache,o=e?e.apply(this,arguments):r;return i.has(o)||i.set(o,t.apply(this,arguments)),i.get(o)}return n.cache=new Map,n},thousandBitSegmentation:function(t){var e=String(t),n=/\d{1,3}(?=(\d{3})+$)/g;return e.replace(/^(\d+)((\.\d+)?)$/,function(t,e,r){return e.replace(n,"$&,")+r})},urlSplicing:function(t,e){var n=[];for(var r in null==t&&(t=""),e)if(e.hasOwnProperty(r)){var i=e[r];n.push(r+"="+(s(i)?encodeURIComponent(i):i))}if(0===n.length)return t;var o,u,a,c=n.join("&");if(/[#?]/.test(t)){var f=t.indexOf("#"),l=t.indexOf("?"),d=-1!==f&&-1!==l;if(d&&f>l)return t.substr(0,f)+(f-l>2?"&":"")+c+t.substr(f);if(d&&f<l||-1===f)return u=c,a=l!==(o=t).length-1?"&":"",""+o+a+u}return t+"?"+c}};return null!==window.McTools&&void 0!==window.McTools||(window.McTools=d),d});
